<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:c="clr-namespace:MH.UI.WPF.Controls"
  xmlns:conv="clr-namespace:MH.UI.WPF.Converters"
  xmlns:rd="clr-namespace:MH.UI.WPF.Resources"
  xmlns:uic="clr-namespace:MH.UI.Controls;assembly=MH.UI">

  <Style x:Key="MH.S.TreeMenuItem" TargetType="MenuItem" BasedOn="{StaticResource MH.S.MenuItem}">
    <Setter Property="Icon" Value="{Binding Icon, Converter={x:Static conv:IconConverter.Inst}}"/>
    <Setter Property="Header" Value="{Binding Name}"/>
    <Setter Property="Command" Value="{Binding Command}"/>
    <Setter Property="CommandParameter" Value="{Binding CommandParameter}"/>
    <Setter Property="ItemsSource" Value="{Binding Items}"/>
    <Setter Property="InputGestureText" Value="{Binding InputGestureText}"/>
  </Style>

  <Style x:Key="MH.S.TreeMenuHost" TargetType="c:TreeMenuHost">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="Margin" Value="0"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="c:TreeMenuHost">
          <Menu Background="Transparent" VerticalAlignment="Center" Margin="0">
            <MenuItem ItemsSource="{Binding Menu, RelativeSource={RelativeSource TemplatedParent}}" Padding="6,2,-2,2">
              <MenuItem.Icon>
                <Path
                  Data="{Binding Icon, Converter={x:Static conv:ResourceConverter.Inst}}"
                  Fill="{Binding Icon, Converter={x:Static conv:ResourceConverter.Inst},
                          ConverterParameter={x:Static rd:Dictionaries.IconToBrush}}"
                  Style="{StaticResource MH.S.Icon.Shadow}"/>
              </MenuItem.Icon>

              <MenuItem.ItemContainerStyle>
                <Style TargetType="MenuItem" BasedOn="{StaticResource MH.S.TreeMenuItem}">
                  <Setter Property="ItemContainerStyle" Value="{StaticResource MH.S.TreeMenuItem}"/>
                </Style>
              </MenuItem.ItemContainerStyle>
            </MenuItem>
          </Menu>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>